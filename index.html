<!DOCTYPE html>
<html>
<body>
<script src="https://sdk.morphcast.com/mphtools/v1.1/mphtools.js" data-config="cameraPrivacyPopup, compatibilityUI, compatibilityAutoCheck"></script>
<script src="https://ai-sdk.morphcast.com/v1.16/ai-sdk.js"></script>
<script src="https://sdk.morphcast.com/emotion-statistics/v1.0-beta/script.js"></script>
<script>

      const statsConfig = {
            sendDatainterval: 5000,
            tickInterval: 1000,
            stopAfter: 7200000,
            licenseKey: "sk300739885aa80c0ecc47487a732aa36e3e4664293eba"
          };
      const statisticsUploader = new MorphCastStatistics.StatisticsUploader(statsConfig);
  
CY.loader()
  .licenseKey("sk300739885aa80c0ecc47487a732aa36e3e4664293eba")
  .addModule(CY.modules().FACE_AROUSAL_VALENCE.name, {smoothness: 0.70})
  .addModule(CY.modules().FACE_EMOTION.name, {smoothness: 0.40})
  .addModule(CY.modules().FACE_ATTENTION.name, {smoothness: 0.83})
  .addModule(CY.modules().ALARM_LOW_ATTENTION.name, {timeWindowMs: 5000, initialToleranceMs: 7000, threshold: 0.33})
  .addModule(CY.modules().FACE_WISH.name, {smoothness: 0.8})
  .addModule(CY.modules().FACE_POSE.name, {smoothness: 0.65})
  .addModule(CY.modules().FACE_DETECTOR.name, {maxInputFrameSize: 320, smoothness: 0.83})
  .addModule(CY.modules().DATA_AGGREGATOR.name, {initialWaitMs: 2000, periodMs: 1000})
  .addModule(CY.modules().FACE_POSITIVITY.name, {smoothness: 0.40, gain: 2, angle: 17})
  .load()
.then(async ({ start, stop }) => {
      
      await start();
      await statisticsUploader.start();

      setTimeout(async () => {
          await statisticsUploader.stop();
          await stop();
      }, statsConfig.stopAfter); //stops after 120 mins 

    });


window.addEventListener(CY.modules().EVENT_BARRIER.eventName, (evt) => {
  console.log('EVENT_BARRIER result', evt.detail);
});

window.addEventListener(CY.modules().DATA_AGGREGATOR.eventName, (evt) => {
  console.log('DATA_AGGREGATOR result', evt.detail);
});

MphTools.CameraPrivacyPopup.setText({
   "title": "Allow us to use your camera",
   "description": "This experience is designed to be viewed with your camera on. The next screen will ask your consent to access data from your camera.",
   "url": "https://YOUR_DOMAIN/<YOUR_PRIVACY_POLICY>"
});

</script>

<!-- your body part -->

<h2>HTML Buttons</h2>
<p>HTML buttons are defined with the button tag:</p>

<button>Click me</button>


</body>
</html>
